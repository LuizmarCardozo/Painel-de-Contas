<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Minhas Contas</title>

    <link rel="manifest" href="manifest.webmanifest" />
    <meta name="theme-color" content="#0033A0" />

    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="topbar">
      <div class="topbar-inner">
        <div class="brand">
          <div class="app-icon" aria-hidden="true">
            <svg viewBox="0 0 64 64" width="34" height="34" role="img">
              <defs>
                <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
                  <stop offset="0" stop-color="#2EA8FF" />
                  <stop offset="0.55" stop-color="#0047D6" />
                  <stop offset="1" stop-color="#0033A0" />
                </linearGradient>
                <linearGradient id="g2" x1="0" y1="1" x2="1" y2="0">
                  <stop offset="0" stop-color="rgba(255,255,255,0.15)" />
                  <stop offset="1" stop-color="rgba(255,255,255,0)" />
                </linearGradient>
                <filter id="soft" x="-30%" y="-30%" width="160%" height="160%">
                  <feGaussianBlur
                    in="SourceAlpha"
                    stdDeviation="2"
                    result="b"
                  />
                  <feOffset dy="2" result="o" />
                  <feMerge>
                    <feMergeNode in="o" />
                    <feMergeNode in="SourceGraphic" />
                  </feMerge>
                </filter>
              </defs>

              <!-- Base rounded square -->
              <rect
                x="6"
                y="6"
                width="52"
                height="52"
                rx="14"
                fill="url(#g1)"
                filter="url(#soft)"
              />
              <rect
                x="8"
                y="8"
                width="48"
                height="48"
                rx="13"
                fill="url(#g2)"
              />

              <!-- Ledger card -->
              <rect
                x="17"
                y="16"
                width="30"
                height="34"
                rx="8"
                fill="rgba(255,255,255,0.12)"
                stroke="rgba(255,255,255,0.22)"
              />
              <rect
                x="20.5"
                y="21"
                width="23"
                height="3"
                rx="1.5"
                fill="rgba(255,255,255,0.55)"
              />
              <rect
                x="20.5"
                y="27"
                width="18"
                height="3"
                rx="1.5"
                fill="rgba(255,255,255,0.35)"
              />
              <rect
                x="20.5"
                y="33"
                width="20"
                height="3"
                rx="1.5"
                fill="rgba(255,255,255,0.35)"
              />

              <!-- Check bubble -->
              <circle
                cx="44"
                cy="41"
                r="10"
                fill="rgba(7,11,24,0.55)"
                stroke="rgba(255,255,255,0.18)"
              />
              <path
                d="M39.7 41.1l2.6 2.6 6-6.2"
                fill="none"
                stroke="rgba(255,255,255,0.9)"
                stroke-width="2.6"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </div>

          <div>
            <div class="brand-title">Minhas Contas</div>
            <div class="brand-subtitle">Local • Offline • Instalável</div>
          </div>
        </div>

        <nav class="tabs">
          <a href="#/dashboard" id="tab-dashboard" class="tab"
            >Próximas / Vencidas</a
          >
          <a href="#/nova" id="tab-nova" class="tab">Cadastrar</a>
          <button id="btn-install" class="ghost" hidden>Instalar</button>
        </nav>
      </div>
    </header>

    <main class="container">
      <!-- DASHBOARD -->
      <section id="view-dashboard" class="view">
        <div class="card">
          <div class="row">
            <div>
              <h2>Próximas e Vencidas</h2>
              <p class="muted">
                Mostra vencidas e as que vencem em até
                <span id="soon-days-label">7</span> dias.
              </p>
            </div>

            <div class="field">
              <label>Prestes a vencer (dias)</label>
              <input id="soonDays" type="number" min="0" step="1" value="7" />
            </div>
          </div>
        </div>

        <div class="grid2">
          <div class="card">
            <h3>Vencidas</h3>
            <ul id="list-overdue" class="list"></ul>
          </div>
          <div class="card">
            <h3>Prestes a vencer</h3>
            <ul id="list-soon" class="list"></ul>
          </div>
        </div>

        <div class="card">
          <h3>Pagas (histórico)</h3>
          <ul id="list-paid" class="list"></ul>
        </div>

        <div class="card">
          <h3>Backup</h3>
          <div class="row">
            <button id="btn-export">Exportar JSON</button>
            <label class="btn-file">
              Importar JSON
              <input
                id="file-import"
                type="file"
                accept="application/json"
                hidden
              />
            </label>
          </div>
        </div>
      </section>

      <!-- CADASTRO -->
      <section id="view-nova" class="view">
        <div class="card">
          <h2>Cadastrar conta</h2>

          <form id="billForm" class="form">
            <input type="hidden" name="id" />

            <div class="grid2">
              <div class="field">
                <label>Descrição</label>
                <input name="title" required placeholder="Ex.: Internet" />
              </div>
              <div class="field">
                <label>Valor (R$)</label>
                <input
                  name="amount"
                  type="number"
                  min="0"
                  step="0.01"
                  required
                  placeholder="Ex.: 129.90"
                />
              </div>
            </div>

            <div class="grid3">
              <div class="field">
                <label>Dia de emissão</label>
                <input
                  name="issueDay"
                  type="number"
                  min="1"
                  max="31"
                  step="1"
                  required
                  placeholder="Ex.: 5"
                />
              </div>

              <div class="field">
                <label>Dia de vencimento</label>
                <input
                  name="dueDay"
                  type="number"
                  min="1"
                  max="31"
                  step="1"
                  required
                  placeholder="Ex.: 20"
                />
              </div>

              <div class="field">
                <label>Lembrar (dias antes)</label>
                <input
                  name="remindDays"
                  type="number"
                  min="0"
                  step="1"
                  value="2"
                />
              </div>
            </div>

            <div class="row">
              <button type="submit" id="btn-submit">Salvar</button>
              <button type="button" class="ghost" id="btn-cancel-edit" hidden>
                Cancelar edição
              </button>
              <button type="button" class="ghost" id="btn-reset">Limpar</button>
            </div>
          </form>
          <hr class="sep" />

          <h3>Contas cadastradas</h3>
          <ul id="list-manage" class="list"></ul>
          <p id="manage-empty" class="muted" style="display: none">
            Nenhuma conta cadastrada ainda.
          </p>
        </div>
      </section>
    </main>

    <footer class="footer muted">
      <span> Atualizações via deploy.</span>
    </footer>

    <!-- Dexie (IndexedDB wrapper) -->
    <script src="https://unpkg.com/dexie@3/dist/dexie.min.js"></script>

    <script type="module" src="pwa.js"></script>
    <script type="module" src="app.js"></script>
  </body>
</html>
